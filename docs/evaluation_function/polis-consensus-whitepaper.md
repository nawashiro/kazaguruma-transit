# pol.is 合意検出アルゴリズムについて

## 1. 概要

本文書は、多様な参加者グループ内での合意領域と代表的意見を特定するために設計された高度な統計システム、pol.is 合意検出アルゴリズムの包括的な分析を提示する。pol.is はウォール街占拠運動に端を発した計算民主主義の試みである。このアルゴリズムは、次元削減、教師なしクラスタリング、統計的仮説検定を組み合わせた多段階アプローチを採用し、疎な投票データから意味のある合意パターンを抽出する。

この実装は、個々の投票をグループ認識型合意指標と代表的コメント識別に変換することで、民主的意見集約の根本的な課題に対処している。アルゴリズムは適応的フォールバック機構による疎データの堅牢な処理を実証し、ベイジアン平滑化と Z 検定検証を通じて統計的に根拠のある結果を提供する。

## 2. システム概観

pol.is 合意アルゴリズムは、参加者の投票行動を処理し、意味のある民主的洞察を抽出するために設計された包括的分析パイプラインとして動作する。このシステムは、統計的厳密性と計算効率を維持しながら、異質な意見グループ内で真の合意を特定するという複雑な課題に取り組む。

アルゴリズムは参加者-意見ペアからなる生の投票データから始まり、各投票は離散的な選択を表現する：賛成（+1）、反対（-1）、または棄権（0）。この疎データ構造は民主的参加の現実を反映しており、個人は通常、利用可能なトピックのサブセットのみに関与し、興味や専門知識の範囲外の問題については棄権する自由を維持している。

コアとなる革新は、合意検出に対するアルゴリズムのグループ認識アプローチにある。すべての参加者を同質な集団として扱うのではなく、システムは最初に次元削減と教師なし学習を通じて自然な意見クラスタを特定する。このクラスタリング段階は参加者の選好の根底にある構造を明らかにし、異なる人口統計学的または思想的グループが特定の提案にどのように反応するかのより詳細な分析を可能にする。

グループが確立されると、アルゴリズムはグループ間動態を考慮した合意スコアを計算する。提案は単に個別グループ内での多数支持によってではなく、異なる参加者クラスタ間での一貫した合意パターンによって高い合意を達成する。このアプローチは、合意指標が単一派閥の支配ではなく、真の広範囲な支持を反映することを保証する。

代表的コメント識別コンポーネントは補完的分析ツールとして機能し、特定されたグループを最も特徴づける意見を強調表示する。統計的有意性検定を通じて、アルゴリズムはグループ間で強い差別的支持を示すコメントを特定し、効果的に各クラスタの特徴的な観点のプロファイルを作成する。

システムの堅牢性は、その適応的設計思想から生まれる。疎データや計算制約に直面した場合、アルゴリズムは慎重に設計されたフォールバック機構を通じて優雅に劣化する。主成分分析はデータの疎密度が閾値を超えると特異値分解に道を譲り、クラスタリングパラメータは参加者数に基づいて動的に調整される。

## 3. 統計的方法論

アルゴリズムの統計的基盤は 3 つの主要な方法論コンポーネントに基づく：特異値分解（SVD）フォールバックを伴う主成分分析（PCA）による次元削減、シルエット最適化による K-means クラスタリング、ベイジアン平滑化による Z 検定を通じた仮説検定である。

### 3.1 次元削減と疎データ処理

初期段階では、高次元の参加者-意見行列をクラスタリング分析に適した低次元表現に変換するために PCA を使用する。アルゴリズムは、非ゼロ要素の総行列要素に対する比率を計算することでデータの疎密度を監視する。疎密度が 50%を超え、すべての可能な参加者-意見組み合わせの半分以上が未投票であることを示す場合、システムは自動的に SVD ベースの次元削減に切り替える。

SVD フォールバック機構は疎行列の数学的特性を活用し、データカバレッジが不完全であっても SVD 分解が潜在因子を特定できる。アルゴリズムは最大特異値に対応する左特異ベクトルを抽出し、データギャップにも関わらず参加者合意の主要パターンを効果的に捉える。この適応的アプローチは、様々なデータ密度条件にわたる堅牢な性能を保証する。

### 3.2 クラスタリングとグループ識別

K-means クラスタリングは次元削減された参加者表現で動作し、自然な意見グループを特定する。アルゴリズムは、クラスタ内凝集性とクラスタ間分離のバランスを取る簡略化されたシルエットスコア計算を通じて最適なクラスタ数を決定する。クラスタ数は 2 から min（10, 2 + floor（参加者数/12））の範囲で、小規模参加者集団の過分割を防ぎながらスケーラビリティを保証する。

クラスタリング品質指標は、クラスタ内分散とクラスタ間分散の計算を組み合わせる。提案されたクラスタ数 k ごとに、アルゴリズムはクラスタ間分散のクラスタ内分散に対する比率を計算し、この分離指標を最大化する構成を選択する。このアプローチは、統計的に意味のあるグループサイズを維持しながら、異なる意見グループを最も捉えるクラスタリング解を特定する。

### 3.3 合意スコアリングとベイジアン平滑化

グループ認識合意検出は、特定されたクラスタ内での合意確率を推定するためにベイジアンアプローチを使用する。各意見-グループ組み合わせについて、アルゴリズムは P（賛成）=（A + 1）/（S + 2）の式を使用して合意確率を計算する。ここで A は賛成票数を、S はグループ内の非棄権票の総数を表す。

このベイジアン平滑化技法は、個別グループ内での小標本サイズの課題に対処する。疑似カウント（賛成 1、反対 1）の追加は、グループの投票データが限られている場合の極端な確率推定を防ぎ、実質的な投票パターンを持つグループ間の相対的差異を保持する。

各意見の最終合意スコアは、すべての特定されたグループにわたる合意確率の積を表す。この乗法的アプローチは、意見が単一グループ内での圧倒的支持ではなく、多様な参加者クラスタにわたって広範な支持を示す場合のみ高い合意スコアを達成することを保証する。

### 3.4 統計的有意性検定

代表的コメント識別は、グループ間の投票パターン差の統計的有意性を評価するために 2 標本 Z 検定に依存する。各意見-グループ組み合わせについて、アルゴリズムは対象グループ内での合意率を他のすべてのグループ結合での合意率と比較する。

Z 検定実装は統合分散推定を使用する：Z = |p1 - p2| / sqrt（p_pooled × （1 - p_pooled） × （1/n1 + 1/n2））。ここで p1 と p2 はグループ特有の合意率を、p_pooled は両集団にわたる全体合意率を表す。結果の Z スコアは、Hart et al.（1968）多項式近似法を使用した正規分布近似によって p 値に変換される。

代表性スコアは合意率の生の差と統計的信頼度を組み合わせる：代表性 =（グループ率 - その他率）×（1 - p 値）。この定式化は、グループ間で実質的かつ統計的に有意な差を示す場合のみ意見が高い代表性スコアを受け取ることを保証する。

アルゴリズムは代表的コメントをフィルタリングするためにデフォルトの Z 閾値 1.28（p < 0.10 に対応）を適用するが、このパラメータは異なる統計的信頼度要件に対して設定可能である。コメントはグループ代表として適格になるために、正の代表性スコアと統計的有意性の両方を示す必要があり、特定された意見がランダム変動から生じるのではなく、真にグループ選好を特徴づけることを保証する。

## 4. 査読者コメント

### 4.1 重大な統計的欠陥

**査読者コメント 1：多重比較問題への対処不足**
現在の実装は複数のクラスタと投稿の組み合わせに対して同時に統計検定を実行しているが、多重比較補正が適用されていない。各クラスタ × 投稿組み合わせで`pAgree`と`pDisagree`の 2 つの p 値が生成され、k 個のクラスタと m 個の投稿がある場合、実質的に 2×k×m 回の統計検定を同時実行している。

**統計的影響：** α = 0.05 で単発検定を前提とした場合、10 クラスタ ×20 投稿では 400 回の検定となり、第一種過誤の実際の確率は 1-(1-0.05)^400 ≈ 1.0 となる。つまり、ランダムデータからでも「統計的に有意」な結果が確実に得られてしまう。

**改善案：** Benjamini-Hochberg 法による FDR 制御、または Bonferroni 補正の実装が必須である。現在の閾値 p < 0.10 は補正後の p 値に適用すべきである。

**査読者コメント 2：Z 検定の適用条件違反**
Z 検定の実装において期待度数の条件確認が不十分である。標本サイズが小さい場合（n1 < 30, n2 < 30）や期待度数が 5 未満の場合、正規近似の精度が著しく低下する。

**統計的影響：** 小標本での Z 検定は p 値の過小評価を引き起こし、偽陽性率の増大につながる。特にクラスタリング後の小グループでは、この問題が顕著に現れる。

**改善案：** Fisher 正確確率検定への条件付きフォールバック機構の実装。n×p < 5 または n×(1-p) < 5 の場合は Fisher 検定を使用すべきである。

### 4.2 ベイジアン平滑化の理論的根拠の脆弱性

**査読者コメント 3：事前分布の恣意的選択**
P（賛成）=（A + 1）/（S + 2）で使用されている疑似カウント（+1, +1）は、Beta(1,1)事前分布（一様分布）を暗黙的に仮定している。しかし、合意形成プロセスにおいて中立的事前分布が妥当かは理論的に疑問である。

**理論的問題：** 人間の意見形成には認知バイアス（確証バイアス、集団思考等）が存在し、真に中立的な事前分布の仮定は非現実的である。Jeffreys 事前分布 Beta(0.5,0.5)の方が情報量理論的に妥当である。

**改善案：** 複数の事前分布での感度分析、または Jeffreys 非情報事前分布の採用を推奨する。

### 4.3 次元削減手法の統計的妥当性の検証不足

**査読者コメント 4：PCA 仮定の未検証**
PCA は線形関係と正規性を仮定するが、離散的投票データ（+1, -1, 0）に対するこれらの仮定の妥当性が検証されていない。特に、疎なバイナリデータでの PCA は解釈困難な主成分を生成する可能性がある。

**統計的影響：** 不適切な次元削減は後続のクラスタリング品質を著しく低下させ、偽の合意パターンを創出する危険がある。

**改善案：** 対応分析（Correspondence Analysis）や Latent Dirichlet Allocation 等、離散データに適した次元削減手法の検討が必要である。

### 4.4 クラスタリング評価指標の不十分性

**査読者コメント 5：簡略化シルエットスコアの問題**
「簡略化されたシルエットスコア」の具体的定義が不明であり、標準的なシルエット係数との差異が検証できない。クラスタリング品質の評価指標として妥当性が保証されていない。

**改善案：** 標準的なシルエット係数、Calinski-Harabasz 指数、Davies-Bouldin 指数等、確立された指標による多面的評価を実装すべきである。

### 4.5 合意スコア算出の数学的問題

**査読者コメント 6：確率の積による合意スコアの非妥当性**
「すべてのグループにわたる合意確率の積」による合意スコア算出は、統計的独立性の仮定を前提とするが、実際のグループ間には相関が存在する可能性が高い。

**数学的問題：** P(合意) = ∏P(グループ i 内合意)は、グループ間の相関を無視した過度に保守的な指標となり、実際の合意を過小評価する。

**改善案：** グループ間相関を考慮したコピュラモデル、または重み付き平均による合意指標の採用を検討すべきである。

### 4.6 実装推奨事項

1. **多重比較補正の緊急実装**：統計的信頼性確保のため最優先
2. **Fisher 正確確率検定の条件付き実装**：小標本問題の解決
3. **事前分布の理論的再検討**：Jeffreys 事前分布の評価
4. **代替次元削減手法の検討**：離散データ特性への適合性向上
5. **包括的クラスタリング評価**：複数指標による品質保証
6. **合意指標の数学的改良**：グループ間相関の考慮

これらの改良なしに、現システムの統計的結論の妥当性は重大な疑問に晒されている。
