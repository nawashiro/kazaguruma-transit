# SCRUM-15: 区連携に伴う認証・課金機能の削除と代替機能実装

## 1. 関連する OKR との結びつき

**Objective 2: 千代田区内の利用者数を増加させる**

- この PBI は千代田区との連携強化を見据えた変更であり、千代田区内の利用者数増加という目標に直接貢献します。
- 認証・課金機能を削除し、完全な公共サービスとしての位置づけを明確にすることで、千代田区民にとってより利用しやすいサービスとなります。

## 2. ユーザーストーリーとの関連性

**ストーリー 2: スマホ操作に不慣れな利用者として、シンプルで直感的に操作できるアプリを使いたい**

- 認証機能の削除により、利用開始までのステップが減少し、特に高齢者やデジタル機器の操作に慣れていないユーザーにとって使いやすくなります。

**ストーリー 11: 外国人観光客として、多言語対応のルート案内と観光情報が欲しい**

- 認証の壁を取り除くことで、一時的な訪問者や観光客も登録不要で即座にサービスを利用できるようになります。

## 3. 実装の技術的アプローチ

### 削除対象の確認

1. **フロントエンドコンポーネント**

   - `SupporterRegistration.tsx`（サポーター登録機能）
   - `SupporterRegistrationModal.tsx`（サポーター登録モーダル）
   - `KofiSupportCard.tsx`（Ko-fi サポートカード）
   - `AuthStatus.tsx`の必要な修正

2. **API エンドポイント**

   - `/api/auth/*` 配下の全ファイル

3. **データベース**
   - Prisma スキーマから`Supporter`モデルの削除
   - Prisma スキーマから`AuthRateLimit`モデルの削除
   - 関連するマイグレーションの作成

### 代替機能の実装

1. **連絡先情報の表示**

   - 区の問い合わせ先情報を静的コンテンツとして追加
   - Sidebar の「Ko-fi でサポートする」リンクを区の問い合わせ先情報へのリンクに置き換え

2. **レート制限の調整**
   - 既存の一般的な API レート制限は残し、制限値を緩和（1 時間に 60 回など）

### UI の更新

1. Sidebar の更新
2. 認証ステータス表示の削除または変更

## 4. 見積もり（ストーリーポイント）の提案

**提案ストーリーポイント: 8**

理由:

- 既存機能の削除作業は比較的シンプルだが、多数のファイルとコンポーネントに影響がある
- UI の整合性を保つための調整が必要
- データベーススキーマの変更とマイグレーションが必要
- 全体的な動作確認とテストが必要

## 5. リスクと依存関係

### リスク

1. **機能削除による UI/UX の不整合**

   - 緩和策: UI 全体を見直し、削除後も違和感のない画面構成に調整する

2. **既存のユーザー体験への影響**

   - 緩和策: 既存ユーザーはゼロであることが確認されているため、大きな影響はない

3. **レート制限調整によるサーバー負荷の可能性**
   - 緩和策: モニタリングを強化し、必要に応じて調整可能な設計にする

### 依存関係

1. **データベースマイグレーション**

   - 既存のデータ構造を変更するため、正確なマイグレーション計画が必要

2. **UI コンポーネント間の関係**
   - 認証関連コンポーネントが他の UI と密接に関連している可能性があるため、慎重な変更が必要
